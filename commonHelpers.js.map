{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst articlesApi = axios.create({\n  baseURL: 'https://pixabay.com/',\n});\n\nexport async function getImages(inputValue, currentPage, perPage) {\n  try {\n    const params = {\n      key: '44427326-e2b4a6eb28305d60c68b186c8',\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: perPage,\n    };\n\n    const res = await articlesApi.get('api/', { params });\n    return res.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from '../main';\nimport iziToast from 'izitoast';\n\nexport let markup = '';\nexport async function imagesTemplate(imagesObj) {\n  let markup = imagesObj\n    .map(image => {\n      return `<li class=\"gallery-item\">  \n      <a class=\"gallery-link\" \n      href=\"${image.largeImageURL}\">\n      <img class=\"gallery-image\" \n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"/>\n      </a> \n<div class=\"text-card-container\">\n   <ul class=\"text-list\">\n     <li class=\"text-item\">\n       <p class=\"text-item-name\">Likes</p>\n       <p class=\"text-item-quantity\">${image.likes}</p>\n     </li>\n     <li class=\"text-item\">\n       <p class=\"text-item-name\">Views</p>\n       <p class=\"text-item-quantity\">${image.views}</p>\n     </li>\n     <li class=\"text-item\">\n       <p class=\"text-item-name\">Comments</p>\n       <p class=\"text-item-quantity\">${image.comments}</p>\n     </li>\n     <li class=\"text-item\">\n       <p class=\"text-item-name\">Downloads</p>\n       <p class=\"text-item-quantity\">${image.downloads}</p>\n     </li>\n   </ul>\n</div>\n</li>`;\n    })\n    .join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  }).refresh();\n}\n\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\nexport function showLoadMore() {\n  refs.loadMoreBtn.classList.remove('hidden');\n}\nexport function hideLoadMore() {\n  refs.loadMoreBtn.classList.add('hidden');\n}\n\nexport function btnStatus(currentPage, maxPage) {\n  if (page >= maxPage) {\n    hideLoadMore();\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The end!',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } else {\n    showLoadMore();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImages } from './js/pixabay-api';\nimport {\n  imagesTemplate,\n  showLoader,\n  hideLoader,\n  showLoadMore,\n  hideLoadMore,\n  btnStatus,\n} from './js/render-functions';\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('.input'),\n  button: document.querySelector('button'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nexport let inputValue = '';\nexport let currentPage = 1;\nexport let perPage = 15;\nexport let maxPage = 1;\n\nhideLoadMore();\n\nrefs.form.addEventListener('submit', async e => {\n  try {\n    e.preventDefault();\n    inputValue = e.target.elements.text.value.trim();\n    let currentPage = 1;\n\n    if (inputValue === '') {\n      refs.gallery.innerHTML = ' ';\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Please, enter the query.',\n        backgroundColor: '#ef4040',\n        layout: 2,\n        position: 'topRight',\n        displayMode: 'once',\n      });\n      return;\n    }\n    showLoader();\n    refs.gallery.innerHTML = ' ';\n\n    const data = await getImages(inputValue, currentPage, perPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n\n    if (maxPage === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Empty result',\n        layout: 2,\n        displayMode: 'once',\n        backgroundColor: '#ef4040',\n        progressBarColor: '#B51B1B',\n        position: 'topRight',\n      });\n      hideLoader();\n      btnStatus(currentPage, maxPage);\n      return;\n    }\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        layout: 2,\n        displayMode: 'once',\n        backgroundColor: '#ef4040',\n        progressBarColor: '#B51B1B',\n        position: 'topRight',\n      });\n      hideLoader();\n      refs.form.reset();\n      return;\n    }\n    hideLoader();\n    refs.form.reset();\n\n    imagesTemplate(data.hits);\n\n    showLoadMore();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  }\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  try {\n    currentPage++;\n    hideLoadMore();\n    showLoader();\n    const data = await getImages(inputValue, currentPage, perPage);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        layout: 2,\n        displayMode: 'once',\n        backgroundColor: '#ef4040',\n        progressBarColor: '#B51B1B',\n        position: 'topRight',\n      });\n      hideLoader();\n      refs.form.reset();\n      return;\n    }\n    imagesTemplate(data.hits);\n  } catch (error) {\n    refs.gallery.innerHTML = ' ';\n\n    iziToast.error({\n      title: 'Error',\n      message: `${error}`,\n      layout: 2,\n      displayMode: 'once',\n      backgroundColor: '#ef4040',\n      progressBarColor: '#B51B1B',\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["articlesApi","axios","getImages","inputValue","currentPage","perPage","params","error","iziToast","imagesTemplate","imagesObj","markup","image","refs","SimpleLightbox","showLoader","hideLoader","showLoadMore","hideLoadMore","btnStatus","maxPage","e","data"],"mappings":"+vBAKA,MAAMA,EAAcC,EAAM,OAAO,CAC/B,QAAS,sBACX,CAAC,EAEM,eAAeC,EAAUC,EAAYC,EAAaC,EAAS,CAChE,GAAI,CACF,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CAChB,EAGI,OADY,MAAML,EAAY,IAAI,OAAQ,CAAE,OAAAM,CAAM,CAAE,GACzC,IACZ,OAAQC,EAAO,CACdC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,GAAGD,CAAK,GACjB,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAChB,CAAK,CACF,CACH,CC5BO,eAAeE,EAAeC,EAAW,CAC9C,IAAIC,EAASD,EACV,IAAIE,GACI;AAAA;AAAA,cAECA,EAAM,aAAa;AAAA;AAAA,aAEpBA,EAAM,YAAY;AAAA,aAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAMgBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,uCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,MAKjD,EACA,KAAK,EAAE,EACVC,EAAK,QAAQ,mBAAmB,YAAaF,CAAM,EAElC,IAAIG,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,GACf,CAAA,EAAE,QAAU,CACf,CAEO,SAASC,GAAa,CAC3BF,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CACO,SAASG,GAAa,CAC3BH,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CACO,SAASI,GAAe,CAC7BJ,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CACO,SAASK,GAAe,CAC7BL,EAAK,YAAY,UAAU,IAAI,QAAQ,CACzC,CAEO,SAASM,EAAUf,EAAagB,EAAS,CAC1C,MAAQA,GACVF,IAEIE,GACFZ,EAAS,KAAK,CACZ,MAAO,WACP,QAAS,4DACjB,CAAO,GAGHS,GAEJ,CC9DO,MAAMJ,EAAO,CAClB,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,QAAQ,EACtC,OAAQ,SAAS,cAAc,QAAQ,EACvC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,YAAa,SAAS,cAAc,gBAAgB,CACtD,EAEO,IAAIV,EAAa,GACbC,EAAc,EACdC,EAAU,GACVe,EAAU,EAErBF,IAEAL,EAAK,KAAK,iBAAiB,SAAU,MAAMQ,GAAK,CAC9C,GAAI,CACFA,EAAE,eAAc,EAChBlB,EAAakB,EAAE,OAAO,SAAS,KAAK,MAAM,OAC1C,IAAIjB,EAAc,EAElB,GAAID,IAAe,GAAI,CACrBU,EAAK,QAAQ,UAAY,IACzBL,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,2BACT,gBAAiB,UACjB,OAAQ,EACR,SAAU,WACV,YAAa,MACrB,CAAO,EACD,MACD,CACDO,IACAF,EAAK,QAAQ,UAAY,IAEzB,MAAMS,EAAO,MAAMpB,EAAUC,EAAYC,EAAaC,CAAO,EAG7D,GAFAe,EAAU,KAAK,KAAKE,EAAK,UAAYjB,CAAO,EAExCe,IAAY,EAAG,CACjBZ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,eACT,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAClB,CAAO,EACDQ,IACAG,EAAUf,EAAagB,CAAO,EAC9B,MACD,CAED,GAAIE,EAAK,KAAK,SAAW,EAAG,CAC1Bd,EAAS,MAAM,CACb,QACE,2EACF,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAClB,CAAO,EACDQ,IACAH,EAAK,KAAK,QACV,MACD,CACDG,IACAH,EAAK,KAAK,QAEVJ,EAAea,EAAK,IAAI,EAExBL,GACD,OAAQV,EAAO,CACdC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,GAAGD,CAAK,GACjB,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAChB,CAAK,CACF,CACH,CAAC,EAEDM,EAAK,YAAY,iBAAiB,QAAS,SAAY,CACrD,GAAI,CACFT,IACAc,IACAH,IACA,MAAMO,EAAO,MAAMpB,EAAUC,EAAYC,EAAaC,CAAO,EAE7D,GAAIiB,EAAK,KAAK,SAAW,EAAG,CAC1Bd,EAAS,MAAM,CACb,QACE,2EACF,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAClB,CAAO,EACDQ,IACAH,EAAK,KAAK,QACV,MACD,CACDJ,EAAea,EAAK,IAAI,CACzB,OAAQf,EAAO,CACdM,EAAK,QAAQ,UAAY,IAEzBL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,GAAGD,CAAK,GACjB,OAAQ,EACR,YAAa,OACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,UAChB,CAAK,CACF,CACH,CAAC"}